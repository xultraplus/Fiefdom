# 《采邑春秋》单位系统设计

## 系统概述

《采邑春秋》的单位系统主要包含：
1. **玩家角色**（主君）：玩家操控的角色
2. **门客**（NPC）：工作单位，共5个学派
3. **访客**（NPC）：随机事件触发者
4. **敌人**（战斗单位）：蛮族、野兽等
5. **动物**（资源单位）：可驯化、狩猎

---

## 1. 玩家角色（主君）

### 1.1 基础属性

| 属性 | 初始值 | 最大值 | 说明 |
|------|--------|--------|------|
| 姓名 | 玩家自定义 | - | 显示在UI中 |
| 爵位 | 下士 | 卿 | 影响井田数量、社交范围 |
| 声望 | 50 | 10000+ | 影响爵位晋升、事件触发 |
| 金钱 | 100铜 | 无限 | 经济货币 |
| 粮食 | 50单位 | 无限 | 养活门客 |
| 铜钱 | 0 | 无限 | 高级货币 |

### 1.2 六艺属性

| 艺术 | 初始等级 | 最大等级 | 升级需求 |
|------|----------|----------|----------|
| 礼 (Rites) | Lv.1 | Lv.10 | 100 XP/级 |
| 乐 (Music) | Lv.1 | Lv.10 | 100 XP/级 |
| 射 (Archery) | Lv.1 | Lv.10 | 100 XP/级 |
| 御 (Chariot) | Lv.1 | Lv.10 | 100 XP/级 |
| 书 (Calligraphy) | Lv.1 | Lv.10 | 100 XP/级 |
| 数 (Math) | Lv.1 | Lv.10 | 100 XP/级 |

### 1.3 战斗属性

| 属性 | 初始值 | 影响因素 |
|------|--------|----------|
| 生命值 (HP) | 100 | "御"等级 + 装备 |
| 行动点 (AP) | 3 | 固定 |
| 背包容量 | 20格 | "御"等级 |
| 移动速度 | 基础 | "御"等级 + 地形 |

### 1.4 外观系统

#### 服饰系统

| 爵位 | 服饰材质 | 服饰颜色 | 配饰 |
|------|----------|----------|------|
| 下士 | 布衣 | 灰色 | 木簪 |
| 中士 | 麻衣 | 褐色 | 骨簪 |
| 上士 | 丝绸 | 蓝色 | 玉簪 |
| 大夫 | 锦绣 | 紫色 | 金簪 |
| 卿 | 貂裘 | 金色 | 冠冕 |

**穿着违制后果**：
- 高于爵位穿着：罚款100铜，声望-20
- 低于爵位穿着：周礼评分-10分

---

## 2. 门客系统

### 2.1 门客属性

#### 基础属性

```gdscript
class_name RetainerData extends Resource

@export var retainer_id: int
@export var name: String
@export var age: int                     # 年龄：18-60
@export var gender: Gender               # 性别
@export var school: School               # 学派
@export var loyalty: int                 # 忠诚度：0-100
@export var efficiency: float            # 效率：0.5-1.5
@export var profession: Profession       # 职业

enum Gender {
    MALE,
    FEMALE
}

enum School {
    CONFUCIAN,    # 儒家
    MOHIST,       # 墨家
    LEGALIST,     # 法家
    AGRICULTURALIST, # 农家
    MILITARIST    # 兵家
}

enum Profession {
    FARMER,       # 农夫
    CRAFTSMAN,    # 工匠
    SCHOLAR,      # 学者
    GUARD,        # 守卫
    SERVANT       # 仆人
}
```

### 2.2 学派特性

#### 儒家 (Confucian)

**特性**：
- 忠诚光环：每个儒家提升其他门客30%忠诚度/天
- 礼仪加成：祭祀活动声望+50%
- 社交能力：宴会成功率+20%

**属性倾向**：
- 效率：0.9-1.2
- 忠诚度初始：50-80
- 适合工作：祭祀、教书、管理

**性格**：
- 喜欢：祭祀、典籍、礼制
- 厌恶：法家政策、奢靡、战争
- 特殊事件：可能被礼制吸引加入

**招募条件**：
- 声望≥100
- "礼"≥Lv.3
- 消耗：100声望或1本典籍

**对话示例**：
- "君子应当遵循周礼。"
- "法家那套实在不敢苟同。"
- "祭祀不可废也。"

#### 墨家 (Mohist)

**特性**：
- 工巧加成：工作效率+20%
- 自动修缮：每天恢复设施耐久10点
- 节俭：粮食消耗-20%

**属性倾向**：
- 效率：1.0-1.5
- 忠诚度初始：40-70
- 适合工作：修缮、制作、建造

**性格**：
- 喜欢：简朴、劳动、科技
- 厌恶：奢侈、浪费、战争
- 特殊事件：发明新工具

**招募条件**：
- 声望≥50
- 拥有工坊
- 消耗：50铜钱或工具

**对话示例**：
- "节俭是美德。"
- "这些工具还能再修。"
- "奢侈之风不可长。"

#### 法家 (Legalist)

**特性**：
- 税收加成：公田声望收益+20%
- 管理能力：门客上限+5
- 严苛：忠诚度<30时可能惩罚

**属性倾向**：
- 效率：1.1-1.4
- 忠诚度初始：30-60
- 适合工作：管理、收税、执法

**性格**：
- 喜欢：秩序、效率、改革
- 厌恶：混乱、传统、仁政
- 特殊事件：推行新政

**招募条件**：
- 声望≥200
- "书"≥Lv.5
- 消耗：200铜钱或竹简

**对话示例**：
- "乱世当用重典。"
- "效率是第一位的。"
- "仁慈是弱者的借口。"

#### 农家 (Agriculturalist)

**特性**：
- 耕作专家：私田产量+50%
- 土地亲和：感知土地肥力
- 耕作建议：提示最佳种植方案

**属性倾向**：
- 效率：1.2-1.5（仅种田）
- 忠诚度初始：50-70
- 适合工作：种田、养殖

**性格**：
- 喜欢：土地、作物、天气
- 厌恶：战争、政治、迁徙
- 特殊事件：发现新作物品种

**招募条件**：
- 声望≥30
- 拥有井田
- 消耗：50粮食或种子

**对话示例**：
- "土地是我们的母亲。"
- "今年适合种黍。"
- "战争只会荒废田地。"

#### 兵家 (Militarist)

**特性**：
- 军事纪律：工作效率+30%（战斗相关工作）
- 主动防御：自动攻击入侵敌人
- 训练能力：提升守卫战斗力

**属性倾向**：
- 效率：1.0-1.3（仅战斗）
- 忠诚度初始：30-60
- 适合工作：守卫、战斗、训练

**性格**：
- 喜欢：战斗、训练、武器
- 厌恶：懦弱、和平主义
- 特殊事件：击退蛮族入侵

**招募条件**：
- 声望≥150
- "射"≥Lv.3
- 消耗：1把武器或100铜钱

**对话示例**：
- "和平是打出来的。"
- "训练不能松懈。"
- "懦夫不配谈尊严。"

### 2.3 门客工作

#### 工作类型

| 工作 | 消耗 | 产出 | 推荐学派 | 效率公式 |
|------|------|------|----------|----------|
| 种田 | 1粮食/天 | 作物 | 农家 | 产量 × 1.5 |
| 修缮 | 0 | 耐久+10 | 墨家 | 耐久 × 1.2 |
| 公田 | 1粮食/天 | 声望+5 | 法家、儒家 | 声望 × 1.2 |
| 守卫 | 2粮食/天 | 安全+5 | 兵家 | 安全 × 1.3 |
| 研习 | 1书籍/天 | 科技点 | 儒家、墨家 | 科技 × 1.0 |

#### 工作分配

**界面操作**：
1. 打开门客管理面板
2. 选择门客
3. 拖拽到工作区域
4. 确认分配

**AI逻辑**：
```gdscript
func _assign_work(retainer: RetainerData) -> void:
    # 优先分配擅长工作
    match retainer.school:
        RetainerData.School.AGRICULTURALIST:
            assign_to_work(retainer, "种田")
        RetainerData.School.MOHIST:
            if needs_repair():
                assign_to_work(retainer, "修缮")
        RetainerData.School.MILITARIST:
            assign_to_work(retainer, "守卫")
```

---

## 3. 访客系统

### 3.1 访客类型

#### 游学士子

**触发条件**：
- 每月随机1-2次
- 声望≥50

**对话选项**：
1. 招募（消耗声望/典籍）
2. 拒绝
3. 辩论（胜则招募，败则失去声望）

**学派分布**：
- 儒家：40%
- 墨家：20%
- 法家：20%
- 农家：10%
- 兵家：10%

#### 商人

**触发条件**：
- 每周随机1次
- 随机天气：晴天

**交易选项**：
1. 购买物品（高于市场价20%）
2. 出售物品（低于市场价20%）
3. 交换（以物易物）

**特色物品**：
- 稀有种子
- 工具
- 典籍
- 装饰品

#### 落魄贵族

**触发条件**：
- 每季度随机1次
- 玩家爵位≥中士

**对话选项**：
1. 招募（消耗丝绸/玉器）
2. 拒绝
3. 捐赠（获得声望）

**特殊效果**：
- 招募后可能带来稀有关系网
- 可能带来特殊任务

#### 蛮族使者

**触发条件**：
- 每半年随机1次
- 北方边境有蛮族活动

**对话选项**：
1. 进贡（和平，消耗资源）
2. 拒绝（可能开战）
3. 辩论（舌战）

**后果**：
- 进贡：和平1年
- 拒绝：50%概率开战
- 辩论胜：获得贡品，和平2年

---

## 4. 敌人系统

### 4.1 蛮族单位

#### 蛮族斥候

| 属性 | 值 |
|------|-----|
| 生命值 | 50 |
| 攻击力 | 10 |
| 移动速度 | 快 |
| 掉落 | 10铜钱、皮毛 |

**行为**：
- 侦察玩家封地
- 撤退并报告主力位置

#### 蛮族战士

| 属性 | 值 |
|------|-----|
| 生命值 | 100 |
| 攻击力 | 20 |
| 移动速度 | 中 |
| 掉落 | 30铜钱、武器 |

**行为**：
- 攻击门客
- 抢夺粮食

#### 蛮族首领

| 属性 | 值 |
|------|-----|
| 生命值 | 300 |
| 攻击力 | 50 |
| 移动速度 | 慢 |
| 掉落 | 200铜钱、稀有装备 |

**行为**：
- 统领蛮族军队
- 策略性进攻

### 4.2 野兽单位

#### 野猪

| 属性 | 值 |
|------|-----|
| 生命值 | 80 |
| 攻击力 | 15 |
| 移动速度 | 快 |
| 掉落 | 肉×5、皮毛 |

**行为**：
- 破坏农田
- 攻击玩家

#### 狼群

| 属性 | 值 |
|------|-----|
| 生命值 | 40 |
| 攻击力 | 10 |
| 移动速度 | 极快 |
| 掉落 | 狼皮×2 |

**行为**：
- 群体攻击
- 偷窃家畜

#### 猛虎

| 属性 | 值 |
|------|-----|
| 生命值 | 200 |
| 攻击力 | 40 |
| 移动速度 | 快 |
| 掉落 | 虎皮、虎骨（珍贵药材） |

**行为**：
- 单独行动
- 巡视领地

---

## 5. 动物系统

### 5.1 家畜

#### 牛

**功能**：
- 耕田：效率+100%（需"牛耕"科技）
- 产奶：每天1单位牛奶
- 繁殖：2头牛→1小牛（30天）

**维护**：
- 每天消耗：2单位草料
- 寿命：10年

**获取**：
- 购买：500铜/头
- 野生捕捉：极低概率

#### 马

**功能**：
- 骑乘：移动速度+100%
- 战车：解锁双马战车、四马战车
- 繁殖：2匹马→1小马（60天）

**维护**：
- 每天消耗：3单位草料
- 寿命：15年

**获取**：
- 购买：2000铜/匹
- 战利品：击败蛮族获得

#### 羊

**功能**：
- 产毛：每10天1单位羊毛
- 产奶：每天1单位羊奶
- 产肉：宰杀获得肉×5
- 繁殖：2只羊→2小羊（20天）

**维护**：
- 每天消耗：1单位草料
- 寿命：8年

**获取**：
- 购买：100铜/只

### 5.2 野生动物

#### 鹿

**行为**：
- 被动逃跑
- 被狩猎时掉落：鹿肉×3、鹿皮

#### 兔

**行为**：
- 快速逃跑
- 被狩猎时掉落：兔肉×1

#### 鱼

**行为**：
- 水中游动
- 钓鱼获得：鱼×1-3

---

## 6. 单牌AI

### 6.1 门客AI

**决策逻辑**：
```gdscript
func _process_retainer_ai(retainer: RetainerData) -> void:
    # 优先级1：生存需求
    if retainer.hunger < 30:
        seek_food()

    # 优先级2：工作
    if retainer.has_work():
        perform_work()

    # 优先级3：休息
    if retainer.stamina < 20:
        rest()

    # 优先级4：社交
    if retainer.social_need > 70:
        socialize()
```

### 6.2 敌人AI

**蛮族AI**：
- 侦察阶段：斥候收集信息
- 准备阶段：集结军队
- 进攻阶段：主力攻击
- 撤退阶段：战败逃跑

**野兽AI**：
- 巡视模式：随机移动
- 警戒模式：发现玩家
- 攻击模式：冲锋
- 逃跑模式：生命值<30%

---

## 7. 单位平衡

### 7.1 门客平衡

| 学派 | 经济贡献 | 战斗力 | 稳定性 | 招募难度 |
|------|----------|--------|--------|----------|
| 儒家 | ⭐⭐ | ⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 墨家 | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ |
| 法家 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 农家 | ⭐⭐⭐⭐⭐ | ⭐ | ⭐⭐⭐⭐ | ⭐ |
| 兵家 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |

### 7.2 敌人平衡

| 敌人 | 威胁度 | 掉落价值 | 出现频率 | 建议 |
|------|--------|----------|----------|------|
| 斥候 | ⭐ | ⭐ | 高 | 忽略或快速击杀 |
| 战士 | ⭐⭐⭐ | ⭐⭐ | 中 | 派兵家门客守卫 |
| 首领 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 低 | 全力迎战 |
| 野猪 | ⭐⭐ | ⭐⭐ | 高 | 狩猎获取食物 |
| 狼群 | ⭐⭐⭐ | ⭐ | 中 | 远战或陷阱 |
| 猛虎 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 低 | 高准备后狩猎 |

---

**文档版本**：v1.0
**最后更新**：2026-01-28
**作者**：游戏设计团队
